<?xml version="1.0" encoding="UTF-8"?>
<templates>

<!-- templates for CREATE -->

<template 
    name="create_function"
    description="%create.function.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.createfunction"
    >CREATE FUNCTION [${functionName}]() RETURNS ${typeName}
AS
BEGIN
  --function body
  RETURN ${result}
END
GO</template>

<template 
    name="create_function"
    description="%create.function2.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.createfunction2"
    >CREATE FUNCTION [${functionName}]() 
RETURNS TABLE
AS  
RETURN   
(
    --select statement
)
GO</template>

<template 
    name="create_sequence"
    description="%create.sequence.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.createsequence"
    >CREATE SEQUENCE [${sequenceName}]
AS bigint
START WITH 1
INCREMENT BY 1
CYCLE
CACHE</template>

<template 
    name="create_procedure"
    description="%create.procedure.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.createprocedure"
    >CREATE PROCEDURE [${procedureName}]
AS
BEGIN
  --procedure body
END
GO</template>

<template 
    name="create_table"
    description="%create.table.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.createtable"
    >CREATE TABLE [${tableName}](
    [${columnName}] [${typeName}] NOT NULL
) ON [PRIMARY]</template>

<template 
    name="create_type"
    description="%create.type.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.createtype"
    >CREATE TYPE [${typeName}] AS TABLE(
    [${columnName}] [${columnType}] NOT NULL,
    INDEX [IX_${typeName}_${columnName}] NONCLUSTERED
(
    ${columnName} ASC
)
)
WITH ( MEMORY_OPTIMIZED = ON )</template>

<template 
    name="create_view"
    description="%create.view.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.createview"
    >CREATE VIEW [${viewName}]
AS
SELECT ${alias}.[${columnName}]
FROM [${tableName}] ${alias}</template>



<!-- templates for ALTER -->

<template 
    name="alter_table_add_column"
    description="%alter.add.column.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.addcolumn"
    >ALTER TABLE ${tableName}
    ADD COLUMN ${columnName} ${dataType}</template>
    
<template 
    name="alter_table_alter_column"
    description="%alter.alter.column.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.altercolumn"
    >ALTER TABLE ${tableName}
    ALTER COLUMN ${columnName} ${operation}</template>

<template 
    name="alter_table_drop_column"
    description="%alter.drop.column.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.dropcolumn"
    >ALTER TABLE ${tableName}
    DROP COLUMN ${columnName}</template>

<template 
    name="alter_table_constraint"
    description="%alter.add.constraint.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.addconstraint"
    >ALTER TABLE ${tableName}
    ADD CONSTRAINT ${constraintName} ${constraintType}(${columnName})</template>

<template 
    name="alter_table_constraint"
    description="%alter.drop.constraint.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.delconstraint"
    >ALTER TABLE ${tableName}
    DROP CONSTRAINT ${constraintName}</template>



<!-- templates for COMMENT -->

<template 
    name="extended_property_add"
    description="%extended.property.add.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.extendedpropertyadd"
    >EXECUTE sys.sp_addextendedproperty 
@name=N'MS_Description', 
@value=N'${comment}', 
@level0type=N'SCHEMA',
@level0name=N'${schemaName}', 
@level1type=N'TABLE',
@level1name=N'${tableName}'
GO</template>

<template 
    name="extended_property_drop"
    description="%extended.property.drop.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.extendedpropertydrop"
    >EXECUTE sys.sp_dropextendedproperty 
@name=N'MS_Description', 
@level0type=N'SCHEMA',
@level0name=N'${schemaName}', 
@level1type=N'TABLE',
@level1name=N'${tableName}'
GO</template>

<template 
    name="extended_property_update"
    description="%extended.property.update.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.extendedpropertyupdate"
    >EXECUTE sys.sp_updateextendedproperty 
@name=N'MS_Description', 
@value=N'${comment}', 
@level0type=N'SCHEMA',
@level0name=N'${schemaName}', 
@level1type=N'TABLE',
@level1name=N'${tableName}'
GO</template>



<!-- templates for privileges -->

<template 
    name="grant"
    description="%grant.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.grant"
    >GRANT ALL ON ${statementType} ${statementName} TO ${role}</template>

<template 
    name="revoke"
    description="%revoke.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.revoke"
    >REVOKE ALL ON ${statementType} ${statementName} FROM ${role}</template>



<!-- templates for data processing -->

<template 
    name="select"
    description="%select.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.select"
    >SELECT
  ${columnName} 
FROM
  ${tableName}</template>

<template 
    name="select"
    description="%select2.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.select2"
    >SELECT
  *
FROM
  ${tableName}</template>

<template 
    name="insert"
    description="%insert.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.insert"
    >INSERT INTO ${tableName}
  ( ${columnName} )
VALUES
  ( ${value} )</template>

<template 
    name="insert"
    description="%insert2.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.insert2"
    >INSERT INTO ${tableName}
VALUES
  ( ${value} )</template>

<template 
    name="update"
    description="%update.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.update"
    >UPDATE ${tableName}
  SET ${columnName} = ${value}</template>

<template 
    name="delete"
    description="%delete.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.delete"
    >DELETE FROM ${tableName}</template>

<template 
    name="truncate"
    description="%truncate.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.truncate"
    >TRUNCATE TABLE ${tableName}</template>

<template 
    name="case"
    description="%case.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.case"
    >CASE ${columnName} 
    WHEN ${value} THEN ${value} 
    ELSE ${value} 
END</template>

<template 
    name="case"
    description="%case2.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.case2"
    >CASE
    WHEN ${columnName} = ${value} THEN ${value} 
    ELSE ${value} 
END</template>

<template 
    name="group"
    description="%group.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.group"
    >GROUP BY ${columnName}</template>

<template 
    name="order"
    description="%order.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.order"
    >ORDER BY ${columnName}</template>



<!-- templates for aggregate functions -->

<template 
    name="count"
    description="%count.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.count">COUNT(${columnName})</template>

<template 
    name="max"
    description="%max.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.max">MAX(${columnName})</template>

<template 
    name="min"
    description="%min.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.min">MIN(${columnName})</template>

<template 
    name="avg"
    description="%avg.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.avg">AVG(${columnName})</template>

<template 
    name="sum"
    description="%sum.desc" 
    context="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs" 
    id="ru.taximaxim.codekeeper.ui.sqlEditorContextTypeMs.sum">SUM(${columnName})</template>

</templates>
